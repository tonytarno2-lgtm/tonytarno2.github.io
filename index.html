<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Manikato - Sistema Completo</title>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a0f0a 0%, #2c1810 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* ANIMACIONES LOS ANDINOSOS */
        .floating-andinoso {
            position: fixed;
            font-size: 24px;
            opacity: 0.2;
            pointer-events: none;
            z-index: 0;
            animation: floatAndinoso 6s infinite ease-in-out;
            color: #d4af37;
        }

        @keyframes floatAndinoso {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .andinoso1 { top: 10%; left: 5%; animation-delay: 0s; }
        .andinoso2 { top: 20%; right: 8%; animation-delay: 2s; }
        .andinoso3 { bottom: 15%; left: 10%; animation-delay: 1s; }
        .andinoso4 { bottom: 25%; right: 12%; animation-delay: 3s; }
        .andinoso5 { top: 40%; left: 20%; animation-delay: 4s; }
        .andinoso6 { top: 60%; right: 15%; animation-delay: 2.5s; }

        .cartel-andinoso {
            position: fixed;
            background: linear-gradient(145deg, #8b4513, #5c3b2a);
            color: #ffefd5;
            padding: 12px 25px;
            border-radius: 50px;
            border: 3px solid #d4af37;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 5;
        }

        .cartel1 { top: 15%; left: 5%; transform: rotate(-5deg); }
        .cartel2 { bottom: 20%; right: 8%; transform: rotate(3deg); }

        .menu-container {
            max-width: 1300px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            z-index: 10;
        }

        .header {
            background: linear-gradient(145deg, #8b4513, #5c3b2a);
            padding: 20px 30px;
            border-bottom: 4px solid #d4af37;
            text-align: center;
        }

        .admin-badge {
            background: linear-gradient(145deg, #d4af37, #8b4513);
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 18px;
            border: 2px solid #ffefd5;
            cursor: pointer;
            display: inline-block;
            margin-bottom: 20px;
        }

        .logo-circle {
            width: 100px;
            height: 100px;
            background: #fff5e6;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            border: 4px solid #d4af37;
        }

        .header h1 {
            color: #ffefd5;
            font-size: 48px;
            text-shadow: 3px 3px 0px #3a2419;
            margin-bottom: 10px;
        }

        .slogan {
            color: #ffd7a7;
            font-size: 18px;
            font-style: italic;
        }

        .barra-usuario {
            background: linear-gradient(145deg, #f5e6d3, #ecd9c2);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #d4af37;
            flex-wrap: wrap;
            gap: 10px;
        }

        .usuario-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .usuario-nombre {
            font-weight: bold;
            color: #8b4513;
            font-size: 18px;
            background: white;
            padding: 5px 15px;
            border-radius: 50px;
            border: 1px solid #d4af37;
        }

        .total-cuenta {
            background: #28a745;
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 20px;
            border: 2px solid #d4af37;
        }

        .btn-login, .btn-registro, .btn-cerrar {
            background: linear-gradient(145deg, #8b4513, #5c3b2a);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 50px;
            cursor: pointer;
            border: 2px solid #d4af37;
            font-weight: bold;
            margin: 0 5px;
        }

        .btn-registro {
            background: linear-gradient(145deg, #d4af37, #8b4513);
        }

        h2 {
            text-align: center;
            font-size: 36px;
            color: #4a3729;
            margin: 30px 0;
        }

        .categoria {
            background: #fffbf5;
            margin: 25px 20px;
            padding: 25px;
            border-radius: 30px;
            border: 2px solid #ecd9c2;
        }

        .categoria h3 {
            color: #8b4513;
            font-size: 28px;
            margin-bottom: 20px;
            padding-left: 15px;
            border-left: 8px solid #d4af37;
        }

        .productos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .producto-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid #ecd9c2;
            transition: all 0.3s ease;
        }

        .producto-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border-color: #d4af37;
        }

        .producto-imagen {
            height: 120px;
            background: linear-gradient(145deg, #f5e6d3, #e8d9cc);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            border-bottom: 2px solid #ecd9c2;
        }

        .producto-info {
            padding: 15px;
            text-align: center;
        }

        .producto-info h4 {
            color: #4a3729;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .descripcion {
            color: #7d5e4a;
            font-size: 12px;
            margin: 5px 0;
            font-style: italic;
        }

        .precio {
            color: #8b4513;
            font-size: 20px;
            font-weight: bold;
            background: linear-gradient(145deg, #f5e6d3, #ecd9c2);
            padding: 5px 12px;
            border-radius: 25px;
            display: inline-block;
            border: 2px solid #d4af37;
            margin: 8px 0;
        }

        .btn-agregar-cuenta {
            background: linear-gradient(145deg, #28a745, #1e7e34);
            color: white;
            border: none;
            padding: 8px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            border: 2px solid #d4af37;
            font-size: 14px;
        }

        .cuenta-actual {
            background: linear-gradient(145deg, #fff5e6, #ffefd5);
            margin: 20px 25px;
            padding: 20px;
            border-radius: 25px;
            border: 3px solid #d4af37;
        }

        .item-cuenta {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #d4af37;
            font-size: 16px;
        }

        .total-cuenta-detalle {
            font-size: 24px;
            font-weight: bold;
            color: #8b4513;
            margin: 15px 0;
            text-align: right;
        }

        .btn-pagar-cuenta {
            background: linear-gradient(145deg, #28a745, #1e7e34);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            border: 3px solid #d4af37;
            width: 100%;
        }

        .footer {
            background: linear-gradient(145deg, #5c3b2a, #4a3729);
            padding: 25px;
            text-align: center;
            margin-top: 30px;
            border-top: 3px solid #d4af37;
        }

        .footer p {
            color: #ffefd5;
            font-size: 18px;
            font-weight: bold;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-contenido {
            background: linear-gradient(145deg, #fff5e6, #ffefd5);
            padding: 30px;
            border-radius: 30px;
            max-width: 400px;
            width: 90%;
            border: 4px solid #d4af37;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .cerrar-modal {
            font-size: 40px;
            cursor: pointer;
            color: #8b4513;
        }

        .form-group {
            margin: 15px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #4a3729;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #d4af37;
            border-radius: 10px;
            font-size: 16px;
        }

        .btn-modal {
            background: linear-gradient(145deg, #8b4513, #5c3b2a);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            border: 2px solid #d4af37;
            font-size: 18px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <!-- ANIMACIONES LOS ANDINOSOS -->
    <div class="floating-andinoso andinoso1">ü•Å ¬°Andinoso!</div>
    <div class="floating-andinoso andinoso2">üé∫ ¬°Oye!</div>
    <div class="floating-andinoso andinoso3">ü™á ¬°Dale!</div>
    <div class="floating-andinoso andinoso4">üéµ ¬°Rumba!</div>
    <div class="floating-andinoso andinoso5">üï∫ ¬°Bailando!</div>
    <div class="floating-andinoso andinoso6">üíÉ ¬°Gozando!</div>
    
    <div class="cartel-andinoso cartel1">üî• LOS ANDINOSOS üî•</div>
    <div class="cartel-andinoso cartel2">‚ö° EL RITMO DE CUBA ‚ö°</div>

    <div class="menu-container">
        <!-- HEADER CON ADMIN -->
        <div class="header">
            <div class="admin-badge" onclick="abrirAdmin()">üëë ADMIN</div>
            
            <div class="logo-circle">‚òï</div>
            <h1>El Manikato</h1>
            <p class="slogan">‚ãÜÔΩ°¬∞‚ú© Sabores que enamoran ‚ú©¬∞ÔΩ°‚ãÜ</p>
        </div>

        <!-- BARRA DE USUARIO -->
        <div class="barra-usuario" id="barraUsuario">
            <div class="usuario-info" id="usuarioNoLogueado">
                <span style="font-size: 18px;">üîì Cliente no identificado</span>
            </div>
            <div class="usuario-info" id="usuarioLogueado" style="display: none;">
                <span class="usuario-nombre" id="nombreUsuario"></span>
                <span class="total-cuenta" id="totalCuenta">$0</span>
            </div>
            <div>
                <button class="btn-login" id="btnLogin" onclick="abrirModal('login')">Iniciar Sesi√≥n</button>
                <button class="btn-registro" id="btnRegistro" onclick="abrirModal('registro')">Registrarse</button>
                <button class="btn-cerrar" id="btnCerrar" style="display: none;" onclick="cerrarSesion()">Cerrar Sesi√≥n</button>
            </div>
        </div>

        <h2>üìã Nuestro Cat√°logo</h2>

        <!-- BEBIDAS CALIENTES -->
        <div class="categoria">
            <h3>‚òï Bebidas Calientes</h3>
            <div class="productos-grid">
                <div class="producto-card">
                    <div class="producto-imagen">‚òï</div>
                    <div class="producto-info">
                        <h4>Caf√©</h4>
                        <p class="descripcion">Reci√©n hecho</p>
                        <div class="precio">$20</div>
                        <button class="btn-agregar-cuenta" onclick="agregarACuenta('Caf√©', 20)">‚ûï Agregar</button>
                    </div>
                </div>
                <div class="producto-card">
                    <div class="producto-imagen">‚òï</div>
                    <div class="producto-info">
                        <h4>Caf√© Cortado</h4>
                        <p class="descripcion">Con leche condensada</p>
                        <div class="precio">$30</div>
                        <button class="btn-agregar-cuenta" onclick="agregarACuenta('Caf√© Cortado', 30)">‚ûï Agregar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ALIMENTOS -->
        <div class="categoria">
            <h3>ü•™ Alimentos</h3>
            <div class="productos-grid">
                <div class="producto-card">
                    <div class="producto-imagen">üçï</div>
                    <div class="producto-info">
                        <h4>Pizza de queso</h4>
                        <p class="descripcion">Queso derretido</p>
                        <div class="precio">$130</div>
                        <button class="btn-agregar-cuenta" onclick="agregarACuenta('Pizza de queso', 130)">‚ûï Agregar</button>
                    </div>
                </div>
                <div class="producto-card">
                    <div class="producto-imagen">üå≠</div>
                    <div class="producto-info">
                        <h4>Pan con salchicha</h4>
                        <p class="descripcion">Salchicha jugosa</p>
                        <div class="precio">$120</div>
                        <button class="btn-agregar-cuenta" onclick="agregarACuenta('Pan con salchicha', 120)">‚ûï Agregar</button>
                    </div>
                </div>
                <div class="producto-card">
                    <div class="producto-imagen">üêü</div>
                    <div class="producto-info">
                        <h4>Pan con minuta</h4>
                        <p class="descripcion">Pescado frito</p>
                        <div class="precio">$200</div>
                        <button class="btn-agregar-cuenta" onclick="agregarACuenta('Pan con minuta', 200)">‚ûï Agregar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- CIGARROS -->
        <div class="categoria">
            <h3>üö¨ Cigarros</h3>
            <div class="productos-grid">
                <div class="producto-card">
                    <div class="producto-imagen">üö¨</div>
                    <div class="producto-info">
                        <h4>Popular Rojo</h4>
                        <p class="descripcion">Sabor cl√°sico</p>
                        <div class="precio">$30</div>
                        <button class="btn-agregar-cuenta" onclick="agregarACuenta('Popular Rojo', 30)">‚ûï Agregar</button>
                    </div>
                </div>
                <div class="producto-card">
                    <div class="producto-imagen">üö¨</div>
                    <div class="producto-info">
                        <h4>Mondeo</h4>
                        <p class="descripcion">Suave y elegante</p>
                        <div class="precio">$35</div>
                        <button class="btn-agregar-cuenta" onclick="agregarACuenta('Mondeo', 35)">‚ûï Agregar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- REFRESCOS -->
        <div class="categoria">
            <h3>ü•§ Refrescos</h3>
            <div class="productos-grid">
                <div class="producto-card">
                    <div class="producto-imagen">ü•§</div>
                    <div class="producto-info">
                        <h4>Refresco de vaso</h4>
                        <p class="descripcion">Fresco</p>
                        <div class="precio">$20</div>
                        <button class="btn-agregar-cuenta" onclick="agregarACuenta('Refresco de vaso', 20)">‚ûï Agregar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- CUENTA ACTUAL -->
        <div id="cuentaActualContainer" class="cuenta-actual" style="display: none;">
            <h3>üìã Mi cuenta</h3>
            <div id="listaCuentaActual"></div>
            <div class="total-cuenta-detalle" id="totalCuentaDetalle">Total: $0</div>
            <button class="btn-pagar-cuenta" onclick="pagarCuenta()">üí∞ Pagar cuenta</button>
        </div>

        <div class="footer">
            <p>‚ú® El lugar m√°s asequible del pedag√≥gico ‚ú®</p>
        </div>
    </div>

    <!-- MODAL LOGIN -->
    <div id="modalLogin" class="modal">
        <div class="modal-contenido">
            <div class="modal-header">
                <h2>üîê Iniciar Sesi√≥n</h2>
                <span class="cerrar-modal" onclick="cerrarModal('login')">&times;</span>
            </div>
            <div class="form-group">
                <label>üì± Tel√©fono</label>
                <input type="tel" id="loginTelefono" placeholder="Ej: 51946649">
            </div>
            <div class="form-group">
                <label>üîë Contrase√±a</label>
                <input type="password" id="loginPassword" placeholder="********">
            </div>
            <button class="btn-modal" onclick="iniciarSesion()">Ingresar</button>
        </div>
    </div>

    <!-- MODAL REGISTRO -->
    <div id="modalRegistro" class="modal">
        <div class="modal-contenido">
            <div class="modal-header">
                <h2>üìù Registro</h2>
                <span class="cerrar-modal" onclick="cerrarModal('registro')">&times;</span>
            </div>
            <div class="form-group">
                <label>üë§ Nombre</label>
                <input type="text" id="regNombre" placeholder="Ej: Juan P√©rez">
            </div>
            <div class="form-group">
                <label>üì± Tel√©fono</label>
                <input type="tel" id="regTelefono" placeholder="Ej: 51946649">
            </div>
            <div class="form-group">
                <label>üîë Contrase√±a</label>
                <input type="password" id="regPassword" placeholder="********">
            </div>
            <button class="btn-modal" onclick="registrarCliente()">Registrarse</button>
        </div>
    </div>

    <!-- MODAL ADMIN -->
    <div id="modalAdmin" class="modal" style="display: none;">
        <div class="modal-contenido">
            <div class="modal-header">
                <h2>üëë Panel Admin</h2>
                <span class="cerrar-modal" onclick="cerrarModalAdmin()">&times;</span>
            </div>
            <div class="form-group">
                <label>üîê Contrase√±a</lab
